<template name="shop">
  <div class="container" style="margin-top:5%;">
    <div class="col-md-3 col-xs-3 col-sm-3">
      <div class="portlet box green" >
        <div class="portlet-title">
          <div class="caption">
            <i class="fa fa-tags"></i>
            <span class="caption-subject bold uppercase">Categories</span>
          </div>
        </div>
        <div class="portlet-body vertical-center">
          <div class="col-md-10 col-md-offset-1 col-sm-12 col-xs-12 col-lg-10 col-lg-offset-1">
            {{#each addIndex categories}}
            <h4 style="margin-left:-10px">
              <a data-toggle="collapse" href="#{{index}}" class="maincat" id="maincat{{index}}">
                <i class="fa fa-caret-right fa-lg"></i> {{value}} </a>
            </h4>
            <div id="{{index}}" class="panel-collapse collapse">
              <div>
                {{#each sCategories value}}
                <div id="sCategories" data-test="{{this}}">{{this}} </div>
                {{/each}}
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-9 col-xs-9 col-sm-9">
      <div class="portlet box green" data-intro={{findTool "SHOPS"}} data-step="1">
        <div class="portlet-title">
          <div class="caption">
            <i class="fa fa-thumbs-up"></i>
            <span class="caption-subject bold uppercase">Recommended for you </span>
          </div>
        </div>
        <div class="portlet-body vertical-center">
          <div class="row" style="max-height:380px;overflow-y:auto">
            {{#each recommendGet}}
            <div class="col-md-4" style="min-height:340px;text-align:center;padding-top:20px;">
              <a href="{{this.productUrl}}">
                <div class="col-md-12" style="border:1px solid black;background-color:none;min-height:200px;">
                  <img src="/cfs/files/images/{{this.thumbnail}}" style="height: 200px;max-width: 100%;">
                </div>
              </a>
              <div class="col-md-12" style="text-align:center;height:75px;display: table;">
                {{#if added}}
                <div class="alert alert-success col-md-12;" style="display: table-cell;vertical-align: middle;">
                  <strong>Success!</strong> The item has been added to your budget.
                </div>
                {{else}}
                <div style="display: table-cell;vertical-align: middle;">{{this.productName}} </div>
                {{/if}}
              </div>
              <div class="col-md-12" style="text-align:center;height:20px;line-height:20px"> $ <b style="font-size:18px">{{this.price}} </b></div>
              <div class="col-md-12" style="text-align:center;padding-top:5px">
                <b>Quantity</b>:&nbsp;&nbsp;<i class="fa fa-minus-square-o" id="minus" data-minus="{{this.productName}}" style="padding-right:5%;"></i> <b>{{quantity}} </b><i class="fa fa-plus-circle" id="plus" data-add="{{this.productName}}" style="padding-left:5%;"></i>

                <div class="col-md-12" style="text-align:center;padding-top:5px">
                  <button type="button" id="addToBudget" class="btn green">Add to budget</button>
                </div>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
      <div class="portlet box blue-hoki" id="displayProducts" style="display:none">
        <div class="portlet-title">
          <div class="caption">
            <i class="fa fa-question-circle fa-5x red-tooltip" data-toggle="tooltip" data-placement="left" title="{{findTool "SHOPS"}}" style="position:absolute;top:2px;right:0px;font-size:115%;"></i>
            <i class="fa fa-thumbs-up"></i>
            <span class="caption-subject bold uppercase">{{currentCat}}</span>
          </div>
        </div>
        <div class="portlet-body vertical-center" style="min-height:380px;">
          <div class="row">
            {{#each products}}
            <div class="col-md-4" style="min-height:340px;text-align:center;padding-top:20px">
              <a href="{{this.productUrl}}">
                <div class="col-md-12" style="border:1px solid black;background-color:none;min-height:200px;">
                  <img src="/cfs/files/images/{{this.thumbnail}}" style="height: 200px;max-width: 100%;">
                </div>
              </a>
              <div class="col-md-12" style="text-align:center;height:75px;display: table;">
                {{#if added}}
                <div class="alert alert-success col-md-12;" style="display: table-cell;vertical-align: middle;">
                  <strong>Success!</strong> The item has been added to your budget.
                </div>
                {{else}}
                <div style="display: table-cell;vertical-align: middle;">{{this.productName}} </div>
                {{/if}}
              </div>
              <div class="col-md-12" style="text-align:center;height:20px;line-height:20px"> $ <b style="font-size:18px">{{this.price}} </b></div>
              <div class="col-md-12" style="text-align:center;padding-top:5px">
                <b>Quantity</b>:&nbsp;&nbsp;<i class="fa fa-minus-square-o" id="minus" data-minus="{{this.productName}}" style="padding-right:5%;"></i> <b>{{quantity}} </b><i class="fa fa-plus-circle" id="plus" data-add="{{this.productName}}" style="padding-left:5%;"></i>
                <div class="col-md-12" style="text-align:center;padding-top:5px">
                  <button type="button" id="addToBudget" class="btn green">Add to budget</button>
                </div>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>

    </div>
  </div>
</template>
